{"version":3,"sources":["components/sidebar/subcomponents/SidebarButton.js","icons/icons.js","components/sidebar/Sidebar.js","components/header/Header.js","libs/config.js","pages/Search.js","libs/debounce.js","components/player/Player.js","App.js","reportWebVitals.js","index.js"],"names":["SidebarButton","props","to","className","active","icon","children","icons","faSearch","faCompactDisc","Sidebar","location","useLocation","id","pathname","library","search","Header","BACKEND_URL","ytRegex","Search","useState","query","setQuery","results","setResults","showDialog","setShowDialog","youtubeSearch","setYoutubeSearch","ytSearchResults","setYtSearchResults","status","setStatus","debouncedOnChange","useCallback","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","debounce","doSearch","q","a","bar","random","axios","get","params","response","data","hasOwnProperty","console","error","doYoutubeSearch","matches","match","url","toFetchFrom","ci","setInterval","symbol","faSpinner","statusText","spin","state","faExclamationTriangle","clearInterval","faUserClock","position","faCheck","log","useEffect","value","onChange","e","target","map","song","onClick","setPlaying","style","backgroundImage","iconUrl","faPlay","title","all_artists","replace","_id","faYoutube","video","thumbnails","high","faDownload","channelTitle","getRandom","Player","length","setLength","setPosition","playing","loop","setLoop","shuffle","setShuffle","setRandom","rap","getShuffle","next","Math","floor","document","navigator","mediaSession","metadata","window","MediaMetadata","artist","split","join","artwork","src","setActionHandler","getTime","seconds","secondsActual","toFixed","padStart","audioUrl","ref","autoPlay","listenInterval","onListen","onSeeked","currentTime","onLoadedMetadata","duration","onPause","onPlay","onError","onEnded","faRandom","canSkipBackward","skipBackward","faStepBackward","audioEl","current","paused","play","pause","faPause","faStepForward","faRedoAlt","width","App","playingHistory","setPlayingHistory","setPlayingState","pop","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.09d60ebc.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nfunction SidebarButton(props) {\r\n    return <Link to={props.to}><button className={props.active ? \"active\" : null}><FontAwesomeIcon icon={props.icon} /><span>{props.children}</span></button></Link>;\r\n}\r\n\r\nexport default SidebarButton;","import {faCompactDisc, faSearch} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst icons = {\r\n    \"search\": faSearch,\r\n    \"library\": faCompactDisc\r\n}\r\n\r\n\r\nexport default icons;","import React from \"react\";\r\nimport SidebarButton from \"./subcomponents/SidebarButton\";\r\nimport icons from \"../../icons/icons\";\r\nimport \"./styles/Sidebar.scss\";\r\nimport {useLocation} from \"react-router-dom\";\r\n\r\nfunction Sidebar() {\r\n    let location = useLocation();\r\n    return <nav id=\"sidebar\">\r\n        <SidebarButton active={location.pathname === \"/\"} icon={icons.library} to={\"/\"}>Library</SidebarButton>\r\n        <SidebarButton active={location.pathname === \"/search\"} icon={icons.search} to={\"/search\"}>Search</SidebarButton>\r\n    </nav>;\r\n}\r\n\r\nexport default Sidebar;","import \"./styles/Header.scss\";\r\n\r\nfunction Header() {\r\n    return <header />;\r\n}\r\n\r\nexport default Header;","const BACKEND_URL = \"\";\r\n\r\nexport {\r\n    BACKEND_URL\r\n};","import React, {useCallback, useEffect, useState} from \"react\";\r\nimport \"./../styles/Search.scss\";\r\nimport debounce from \"../libs/debounce\";\r\nimport axios from \"axios\";\r\nimport {BACKEND_URL} from \"../libs/config\";\r\nimport {\r\n    faCheck,\r\n    faDownload,\r\n    faExclamationTriangle,\r\n    faPlay,\r\n    faSpinner,\r\n    faUserClock\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faYoutube} from \"@fortawesome/free-brands-svg-icons\";\r\nconst ytRegex = /^(?:https:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\?v=([A-z0-9\\-_]{11})(?:&.*)?|(?:https:\\/\\/)?youtu.be\\/([A-z0-9\\-_]{11})$/;\r\n\r\nexport default function Search(props) {\r\n    let [query, setQuery] = useState(\"\");\r\n    let [results, setResults] = useState([]);\r\n    let [showDialog, setShowDialog] = useState(false);\r\n    let [youtubeSearch, setYoutubeSearch] = useState(\"\");\r\n    let [ytSearchResults, setYtSearchResults] = useState([]);\r\n    let [status, setStatus] = useState(null);\r\n    // Debouncer\r\n    const debouncedOnChange = useCallback(debounce(doSearch, 300), []);\r\n\r\n    async function doSearch(q) {\r\n        if (q !== \"\" || props.bar !== true) {\r\n            let random = \"\";\r\n            if (props.bar !== true) random = \"true\";\r\n            try {\r\n                const response =  await axios.get(BACKEND_URL + \"/search/query\", {params: {q, random}});\r\n                if (response.data.hasOwnProperty(\"error\")) {\r\n                    setResults([]);\r\n                } else {\r\n                    setResults(response.data);\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Failed to search!\");\r\n            }\r\n        } else {\r\n            if (props.bar) setResults([]);\r\n        }\r\n    }\r\n\r\n    const doYoutubeSearch = async () => {\r\n        const matches = youtubeSearch.match(ytRegex);\r\n        if (matches !== null) {\r\n            const url = matches[1] || matches[2];\r\n\r\n            const toFetchFrom = BACKEND_URL + \"/yt/download/\" + url;\r\n\r\n            let ci = setInterval(async () => {\r\n                let symbol = faSpinner;\r\n                let statusText = \"Loading...\";\r\n                let spin = true;\r\n\r\n                let state;\r\n                try {state = await axios.get(toFetchFrom);} catch (e) {}\r\n\r\n                if (state.data.status === \"error\") {\r\n                    symbol = faExclamationTriangle;\r\n                    statusText = \"An error occurred: \" + state.data.error;\r\n                    spin = false;\r\n                    clearInterval(ci);\r\n                } else if (state.data.status === \"queued\") {\r\n                    symbol = faUserClock;\r\n                    statusText = \"Queued. Position: \" + state.data.position;\r\n                    spin = false;\r\n                } else if (state.data.status === \"processing\") {\r\n                    symbol = faSpinner;\r\n                    statusText = \"Processing\";\r\n                    spin = true;\r\n                } else if (state.data.status === \"completed\") {\r\n                    symbol = faCheck;\r\n                    statusText = \"Complete\";\r\n                    spin = false;\r\n                    clearInterval(ci);\r\n                    // Reload\r\n                    setTimeout(async () => {\r\n                        await doSearch(query);\r\n                    }, 1000);\r\n                }\r\n\r\n                setStatus(<div className={\"status\"}>\r\n                    <FontAwesomeIcon icon={symbol} spin={spin} />\r\n                    <p>{statusText}</p>\r\n                </div>);\r\n            }, 1000);\r\n        } else {\r\n            // search\r\n            if (youtubeSearch !== \"\") {\r\n                let response;\r\n                try {\r\n                    response = await axios.get(BACKEND_URL + \"/search/yt\", {params: {q: youtubeSearch}});\r\n                } catch (e) {}\r\n\r\n                if (!response.data.error) {\r\n                    if (response.data.results) {\r\n                        console.log(response.data.results);\r\n                        setYtSearchResults(response.data.results);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    // Update between home and search pages\r\n    useEffect(() => doSearch(query), [props.bar]);\r\n\r\n    // Run debouncer\r\n    useEffect(() => {debouncedOnChange(query);}, [query, debouncedOnChange]);\r\n\r\n    return <div className={\"panel\"}>\r\n        {(props.bar === true) ?  <input className=\"searchBox\" value={query} onChange={e => setQuery(e.target.value)} /> : null}\r\n\r\n        <div className={\"results\"}>\r\n            {results.map(song => <div onClick={() => props.setPlaying(song)} className={\"song\"} key={song._id}>\r\n                <div className={\"song-icon\"} style={{backgroundImage: \"url(\" + BACKEND_URL + song.iconUrl + \")\"}}>\r\n                    <div className={\"song-icon-play\"}><FontAwesomeIcon icon={faPlay} /></div>\r\n                </div>\r\n                <div className={\"song-title\"}>{song.title}</div>\r\n                <div className={\"song-artists\"}>{song.all_artists.replace(/,/g, \", \")}</div>\r\n            </div>)}\r\n            <div className={\"song\"} onClick={() => {setShowDialog(!showDialog); setYoutubeSearch(\"\"); setStatus(null); setYtSearchResults([]);}}>\r\n                <div className={\"song-icon youtube\"} >\r\n                    <FontAwesomeIcon icon={faYoutube} />\r\n                </div>\r\n                <div className={\"song-title\"}>YouTube</div>\r\n                <div className={\"song-artists\"}>Get more songs from youtube!</div>\r\n            </div>\r\n            {showDialog ? <div className={\"dialog-background\"}>\r\n                <div className={\"dialog\"}>\r\n                    <button className={\"close\"} onClick={() => setShowDialog(false)}>&times;</button>\r\n                    <p className={\"title\"}>Get From Youtube!</p>\r\n                    <p className={\"subtitle\"}>Enter a URL to a video or a search query.</p>\r\n                    <input className={\"yt-link\"} value={youtubeSearch} onChange={e => setYoutubeSearch(e.target.value)} />\r\n                    <button className={\"yt-search\"} onClick={doYoutubeSearch}>Search</button>\r\n                    {status}\r\n                    <div className={\"search-results\"}>\r\n                        {ytSearchResults.map(video => <div onClick={async () => {setYoutubeSearch(\"https://youtu.be/\" + video.id); youtubeSearch = \"https://youtu.be/\" + video.id; await doYoutubeSearch();}} key={video.id} className={\"search-result\"}>\r\n                            <div className={\"search-results-icon\"} style={{backgroundImage: \"url(\" + video.thumbnails.high.url + \")\"}}>\r\n                                <div className={\"search-results-icon-play\"}><FontAwesomeIcon icon={faDownload} /></div>\r\n                            </div>\r\n                            <div className={\"search-results-title\"}>{video.title}</div>\r\n                            <div className={\"search-results-artists\"}>{video.channelTitle}</div>\r\n                        </div>)}\r\n                    </div>\r\n                </div>\r\n            </div> : null}\r\n        </div>\r\n    </div>;\r\n}\r\n\r\nexport function Homepage(props) {\r\n    let p = {...props}\r\n    p.bar = false;\r\n    return <Search bar {...props} />;\r\n}","export default function debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this, args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n    };\r\n};","import \"./styles/Player.scss\";\r\nimport {BACKEND_URL} from \"../../libs/config\";\r\nimport ReactAudioPlayer from \"react-audio-player\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {faPause, faPlay, faRandom, faRedoAlt, faStepBackward, faStepForward} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport axios from \"axios\";\r\n\r\nasync function getRandom() {\r\n    try {\r\n        const response = await axios.get(BACKEND_URL + \"/search/query\", {params: {random: \"true\"}});\r\n        if (response.data.hasOwnProperty(\"error\")) {\r\n            return [];\r\n        } else {\r\n            return response.data;\r\n        }\r\n    } catch (e) {\r\n        return [];\r\n    }\r\n}\r\n\r\nexport default function Player(props) {\r\n    let [length, setLength] = useState(0);\r\n    let [position, setPosition] = useState(0);\r\n    let [playing, setPlaying] = useState(false);\r\n    let [loop, setLoop] = useState(false);\r\n    let [shuffle, setShuffle] = useState(true);\r\n    let [random, setRandom] = useState([]);\r\n    let rap = false;\r\n\r\n    const getShuffle = async () => setRandom(await getRandom());\r\n\r\n    useEffect(() => {\r\n        // noinspection JSIgnoredPromiseFromCall\r\n        getShuffle();\r\n    }, []);\r\n\r\n    const onLoadedMetadata = (e) => setLength(e.target.duration);\r\n    const onListen = (e) => setPosition(e);\r\n    const onSeeked = (e) => setPosition(e.target.currentTime);\r\n    const onEnd = () => {\r\n        setPlaying(false);\r\n        if (!loop && shuffle) {\r\n            next();\r\n        }\r\n    };\r\n    const next = () => {\r\n        if (random.length !== 0) {\r\n            props.setPlaying(random[Math.floor(Math.random() * random.length)]);\r\n        }\r\n    }\r\n\r\n    // Update Media Overlay\r\n    useEffect(() => {\r\n        if (props.playing !== false) {\r\n            document.title = props.playing.title + \" | Amuseing\";\r\n            navigator.mediaSession.metadata = new window.MediaMetadata({\r\n                title: props.playing.title,\r\n                artist: props.playing.all_artists.split(\",\").join(\", \"),\r\n                artwork: [{src: BACKEND_URL + props.playing.iconUrl}]\r\n            });\r\n        }\r\n    }, [props.playing]);\r\n    \r\n    navigator.mediaSession.setActionHandler(\"nexttrack\", next);\r\n\r\n    const onError = () => setPlaying(false);\r\n    const onPlay = () => setPlaying(true);\r\n    const onPause = () => setPlaying(false);\r\n\r\n    const togglePlaying = () => {\r\n        if (rap.audioEl.current.paused) {\r\n            rap.audioEl.current.play();\r\n        } else {\r\n            rap.audioEl.current.pause();\r\n        }\r\n    }\r\n\r\n    const toggleLoop = () => setLoop(!loop);\r\n    const toggleShuffle = () => setShuffle(!shuffle);\r\n\r\n    useEffect(() => {\r\n        setLength(0);\r\n        setPosition(0);\r\n    }, [props.playing]);\r\n\r\n    const getTime = (seconds) => {\r\n        seconds = Math.floor(seconds);\r\n        let secondsActual = seconds % 60;\r\n        let minutes = (seconds - secondsActual) / 60;\r\n        return minutes.toFixed(0) + \":\" + secondsActual.toFixed(0).padStart(2, \"0\");\r\n    }\r\n\r\n\r\n    if (props.playing) {\r\n        return <div className=\"player\">\r\n            <div className=\"track-info\">\r\n                <div className={\"track-icon\"} style={{backgroundImage: \"url(\" + BACKEND_URL + props.playing.iconUrl + \")\"}} />\r\n                <div className={\"track-title\"}>{props.playing.title}</div>\r\n                <div className={\"track-artists\"}>{props.playing.all_artists.replace(/,/g, \", \")}</div>\r\n            </div>\r\n\r\n            <ReactAudioPlayer src={BACKEND_URL + props.playing.audioUrl} ref={e => rap = e} autoPlay loop={loop} listenInterval={1000} onListen={onListen} onSeeked={onSeeked} onLoadedMetadata={onLoadedMetadata} onPause={onPause} onPlay={onPlay} onError={onError} onEnded={onEnd} />\r\n            <div className=\"controls\">\r\n                <div className=\"shuffle\" onClick={toggleShuffle}>\r\n                    <FontAwesomeIcon icon={faRandom} className={shuffle ? \"icon-enabled\" : \"\"} />\r\n                </div>\r\n                <div className={\"skip back\" + (props.canSkipBackward() ? \"\" : \" disabled\")} onClick={props.skipBackward}>\r\n                    <FontAwesomeIcon icon={faStepBackward} className={shuffle ? \"icon-enabled\" : \"\"} />\r\n                </div>\r\n                <div className=\"playPause\" onClick={togglePlaying}>\r\n                    {playing ? <FontAwesomeIcon icon={faPause} /> : <FontAwesomeIcon icon={faPlay} />}\r\n                </div>\r\n                <div className=\"skip\" onClick={next}>\r\n                    <FontAwesomeIcon icon={faStepForward} className={shuffle ? \"icon-enabled\" : \"\"} />\r\n                </div>\r\n                <div className=\"repeat\" onClick={toggleLoop}>\r\n                    <FontAwesomeIcon icon={faRedoAlt} className={loop ? \"icon-enabled\" : \"\"} />\r\n                </div>\r\n            </div>\r\n            <div className=\"trackInfoProgress\">\r\n                <p>{getTime(position)}</p>\r\n                <div className=\"progressBar\">\r\n                    <div className=\"progressBar-progress\" style={{width: length === 0 ? 0 : (position/length * 100).toFixed(2) + \"%\"}} />\r\n                </div>\r\n                <p>{getTime(length)}</p>\r\n            </div>\r\n        </div>;\r\n    } else return <div className=\"player\" />;\r\n}","import \"./styles/Global.scss\";\r\nimport Sidebar from \"./components/sidebar/Sidebar\";\r\nimport \"typeface-roboto\";\r\nimport Header from \"./components/header/Header\";\r\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\r\nimport Search from \"./pages/Search\";\r\nimport Player from \"./components/player/Player\";\r\nimport {useState} from \"react\";\r\n\r\nfunction App() {\r\n    let [playingHistory, setPlayingHistory] = useState([]);\r\n    let [playing, setPlayingState] = useState(false);\r\n\r\n    const setPlaying = (song) => {\r\n        if (playing !== false) setPlayingHistory([...playingHistory,playing]);\r\n        setPlayingState(song);\r\n    }\r\n\r\n    const skipBackward = () => {\r\n        if (canSkipBackward()) {\r\n            setPlayingState(playingHistory.pop());\r\n        }\r\n    }\r\n\r\n    navigator.mediaSession.setActionHandler(\"previoustrack\", skipBackward)\r\n\r\n    const canSkipBackward = () => playingHistory.length > 0;\r\n\r\n    return <main>\r\n        <BrowserRouter>\r\n            <Header />\r\n            <Sidebar />\r\n\r\n            <Switch>\r\n                <Route path=\"/search\">\r\n                    <Search bar setPlaying={setPlaying} />\r\n                </Route>\r\n\r\n                <Route path=\"/\">\r\n                    <Search setPlaying={setPlaying} />\r\n                </Route>\r\n            </Switch>\r\n\r\n            <Player playing={playing} setPlaying={setPlaying} skipBackward={skipBackward} canSkipBackward={canSkipBackward}  />\r\n        </BrowserRouter>\r\n    </main>;\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport \"./styles/minireset.css\";\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}